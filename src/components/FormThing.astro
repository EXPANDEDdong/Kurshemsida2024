---
const API_ENDPOINT = "./api/posts";
---

<script type="module">
  const form = document.getElementById("postForm");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const body = {
      title: formData.get("title"),
      content: formData.get("content"),
    };

    try {
      const response = await fetch(form.action, {
        method: form.method,
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(body),
      });

      const result = await response.json();
      console.log(result);

      // Handle success, e.g., display a message or redirect
    } catch (error) {
      console.error("Error submitting form:", error);
      // Handle error, e.g., display an error message
    }
  });
</script>

<div class="text-white">
  <form id="postForm" action=`${API_ENDPOINT}` method="POST">
    <input type="text" name="title" placeholder="Title" required />
    <textarea name="content" placeholder="Content" required></textarea>
    <button type="submit">Submit</button>
  </form>
</div>
